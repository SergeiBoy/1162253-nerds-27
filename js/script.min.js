var button=document.querySelector(".map .write-us"),popup=document.querySelector(".modal-message"),close=popup.querySelector(".close-cross"),form=popup.querySelector(".message-form"),personName=popup.querySelector("[name=name]"),email=popup.querySelector("[name=email]"),text=popup.querySelector("[name=text]"),isStorageSupport=!0,storageName="",storageEmail="",mapAddress=document.querySelector(".map .google-map"),mapWrapper=document.querySelector(".map .map-wrapper"),width=document.documentElement.clientWidth;try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}function initMap(){var e={lat:59.938872,lng:30.323047},a=new google.maps.Map(mapAddress,{zoom:17,center:e});new google.maps.Marker({position:e,map:a});mapAddress.style.zIndex=1,mapWrapper.style.display="none"}button.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-message-close"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-message-show"),storageName&&(personName.value=storageName,email.focus()),storageEmail&&(email.value=storageEmail,text.focus())}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-message-show"),popup.classList.remove("modal-message-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-message-close"),personName.required=!1,email.required=!1}),form.addEventListener("submit",function(e){personName.value&&email.value?isStorageSupport&&(localStorage.setItem("name",personName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),personName.value||(personName.required=!0),email.value||(email.required=!0),popup.classList.remove("modal-message-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-message-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-message-show")&&(popup.classList.remove("modal-message-show"),popup.classList.remove("modal-message-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-message-close"),personName.required=!1,email.required=!1))});var script=document.createElement("script");script.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3BpFqzWP_ymtXwTlGLCK0ujLH9BBKCJo&callback=initMap",script.async=!0,script.defer=!0,document.body.appendChild(script),1200<width&&(mapAddress.style.width=width+"px",mapAddress.style.marginLeft=-width/2+"px"),window.addEventListener("resize",function(e){var a=document.documentElement.clientWidth;1200<a?(mapAddress.style.width=a+"px",mapAddress.style.marginLeft=-a/2+"px"):(mapAddress.style.width="1200px",mapAddress.style.marginLeft="-600px")});